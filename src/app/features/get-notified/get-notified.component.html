<div class="row justify-content-center" *ngIf="missingBankForm">
    <form [formGroup]="missingBankForm" class="col-lg-6 col-12 my-5" novalidate
        (ngSubmit)="request(missingBankForm.value)">
        <div class="bg-wrap">
            <div class="row">
                <p class="col-12">Medlemskap:</p>
                <mat-form-field class="col-12">
                    <mat-label>Medlemskap:</mat-label>
                    <mat-chip-list #bankList aria-label="bank selection">
                        <mat-chip *ngFor="let bank of banks; let i = index;" [selectable]="selectable"
                            [removable]="removable" (removed)="remove(bank, i)">
                            {{bank.name}}
                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                        </mat-chip>
                        <input placeholder="Medlemskap" #bankInput [formControl]="bankCtrl" [matAutocomplete]="auto"
                            [matChipInputFor]="bankList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                        <mat-option *ngFor="let bank of filteredBanks | async" [value]="bank">
                            {{bank.name}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
                <rente-form-message class="text-left d-block" [type]="'info'">
                    Bankene gir ofte bedre betingelser hvis du er medlem i en organisasjon
                </rente-form-message>
            </div>
            <div class="row">
                <div class="form-group col-12">
                    <p>E-post:</p>
                    <rente-input [placeholder]="'E-post'" formControlName="email"
                        [errorStateMatcher]="isErrorState(missingBankForm.controls['email'], missingBankForm)">
                    </rente-input>
                    <div *ngIf="missingBankForm.controls['email'].touched" class="error-message">
                        <rente-form-message class="text-left d-block" [type]="'error'"
                            *ngIf="missingBankForm.controls['email'].hasError('required')">
                            Ikke gyldig email
                        </rente-form-message>
                    </div>
                </div>
            </div>
            <div class="register-btn">
                <rente-button color="primary" [disabled]="!missingBankForm.valid">Send</rente-button>
            </div>
        </div>

    </form>
</div>

<div class="d-flex justify-content-center align-items-center mt-4" *ngIf="!missingBankForm">
    <mat-spinner [diameter]="48" [strokeWidth]="4"></mat-spinner>
</div>