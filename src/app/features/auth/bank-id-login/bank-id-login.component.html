<section *ngIf="!isLoginStarted && bankIdForm">
  <div class="row justify-content-center text-center my-2">

    <div class="col">
      <h2 class="title font-weight-bold mt-2">Logg inn med BankID på mobil</h2>
    </div>
  </div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6">
        <p class="my-0 text text-left">
          Legg inn {{ isSsnBankLogin ? 'fødselsnummer' : 'fødselsdato' }} og mobilnummer. Bekreft referansen på mobilen,
          så hentes
          dine lånedata automatisk. Vi
          bruker
          SSL verifisering, så all informasjon sendes kryptert.
        </p>
        <p class="mt-2 mb-4 text text-left">
          Vi støtter kun BankID på Mobil, ikke kodebrikke og passord
        </p>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-5">
        <div class="text-center">
          <form [formGroup]="bankIdForm" novalidate (ngSubmit)="startLogin(bankIdForm.value)">

            <div class="mb-4 bg-wrap">
              <div class="mb-4"><img class="mw-100" src="{{bankLogo}}" alt="{{userBank.label}}"
                  title="{{this.userBank.label}}"></div>
              <div *ngIf="isSsnBankLogin; else birthdateInput" class="form-group">
                <rente-input [errorStateMatcher]="isErrorState(bankIdForm.controls['ssn'], bankIdForm)"
                  [placeholder]="'Ditt fødselsnummer (11 siffer)'" formControlName="ssn" [mask]="ssnMask"
                  [type]="'tel'"></rente-input>
                <div class="error-message" *ngIf="bankIdForm.controls['ssn'].touched">
                  <rente-form-message class="text-left d-block" *ngIf="bankIdForm.controls['ssn'].hasError('required')"
                    [type]="'error'">
                    Fødselsnummer kan ikke være tomt
                  </rente-form-message>
                  <rente-form-message class="text-left d-block" *ngIf="bankIdForm.controls['ssn'].hasError('pattern')"
                    [type]="'error'">
                    Fødselsnummer ikke gyldig
                  </rente-form-message>
                </div>
              </div>

              <ng-template #birthdateInput>
                <div class="form-group">
                  <rente-input [errorStateMatcher]="isErrorState(bankIdForm.controls['birthdate'], bankIdForm)"
                    [placeholder]="'Din fødselsdato (ddmmåå)'" formControlName="birthdate" [mask]="birthdateMask"
                    [type]="'tel'"></rente-input>
                  <div class="error-message" *ngIf="bankIdForm.controls['birthdate'].touched">
                    <rente-form-message class="text-left d-block"
                      *ngIf="bankIdForm.controls['birthdate'].hasError('required')" [type]="'error'">
                      Fødselsdato kan ikke være tomt
                    </rente-form-message>
                    <rente-form-message class="text-left d-block"
                      *ngIf="bankIdForm.controls['birthdate'].hasError('pattern')" [type]="'error'">
                      Fødselsdato ikke gyldig
                    </rente-form-message>
                  </div>
                </div>
              </ng-template>

              <div class="form-group">
                <rente-input [errorStateMatcher]="isErrorState(bankIdForm.controls['phone'], bankIdForm)"
                  [placeholder]="'Ditt mobilnummer (8 siffer)'" formControlName="phone" [mask]="phoneMask"
                  [type]="'tel'">
                </rente-input>
                <div class="error-message" *ngIf="bankIdForm.controls['phone'].touched">
                  <rente-form-message class="text-left d-block"
                    *ngIf="bankIdForm.controls['phone'].hasError('required')" [type]="'error'">
                    Telefonnummer kan ikke være tomt
                  </rente-form-message>
                  <rente-form-message class="text-left d-block" *ngIf="bankIdForm.controls['phone'].hasError('pattern')"
                    [type]="'error'">
                    Telefonnummer ikke gyldig
                  </rente-form-message>
                </div>
              </div>
            </div>
            <div class="mb-2 text-left">
                <mat-checkbox formControlName="confirmation" (change)="isConfirmed = $event.checked">
                    Jeg bekrefter at jeg akrepterer Renteradars <a class="link" (click)="openServiceDialog()">vilkårene</a>
                  </mat-checkbox>
            </div>
            <div class="register-btn">
              <rente-button color="primary" [disabled]="!bankIdForm.valid || !isConfirmed">Logg inn
              </rente-button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<rente-login-status (returnToInputPage)="isLoginStarted = false" [userData]="userData" [userBank]="userBank"
  *ngIf="isLoginStarted"></rente-login-status>