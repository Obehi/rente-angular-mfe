<div class="the-offer">
  <div class="the-offer-header">
    <div *ngIf="!isSweden" class="nr all">
      {{ index }}
    </div>
    <div
      *ngIf="isSweden"
      class="nr"
      [ngClass]="{
        threeMonths: offerType == 'threeMonths',
        oneYear: offerType == 'oneYear',
        all: offerType == 'all'
      }"
    >
      {{ index }}
    </div>

    <div class="top">
      <div
        class="logo"
        [ngStyle]="{
          'background-image': 'url(' + banksMap[offer.bankInfo.bank].img + ')'
        }"
      ></div>
      <div class="offer-product">
        <a class="clickable" target="_blank" (click)="clickHeaderBankUrl(offer)"
          >{{ offer.bankInfo.name }}
          <!--<mat-icon>
                    open_in_new</mat-icon>
                -->
        </a>
        <h3>
          {{ offer.productName }}
        </h3>
      </div>
      <p class="interest-rate">{{ offer.effectiveRate | number: '1.2-2' }} %</p>
    </div>
    <div *ngIf="bankSpecialPromoText !== null" class="special-promo">
      <img class="box-icon" src="../../../../../assets/icons/badge.svg" />
      <p>{{ bankSpecialPromoText }}</p>
    </div>
  </div>

  <div class="the-offer-body">
    <div class="the-offer-body-grid">
      <div class="offer-top">
        <div class="savings-grid">
          <p
            i18n="“title|offer-card@@offer.card.title”"
            class="save-text bottom"
          >
            Du sparer:
          </p>

          <p
            class="top second-row"
            i18n="“first-year|offer-card@@offer.card.firstYear”"
          >
            første år
          </p>
          <h2
            class="bottom"
            *ngIf="offer.savingsFirstYear > 0; else noTotalSavings"
          >
            {{ offer.savingsFirstYear | abs | number }},-
          </h2>
          <ng-template #noSavingsFirstYear>
            <h2 class="bottom">0,-</h2>
          </ng-template>

          <p
            class="top third-row"
            i18n="“over-time|offer-card@@offer.card.over.time”"
          >
            over lånets løpetid
          </p>
          <h2
            class="bottom"
            *ngIf="offer.totalSavings > 0; else noTotalSavings"
          >
            {{ offer.totalSavings | abs | number }},-
          </h2>
          <ng-template #noTotalSavings>
            <h2 class="bottom">0,-</h2>
          </ng-template>
        </div>
      </div>

      <div class="offer-properties">
        <div class="item">
          <img class="icon" src="../../../../assets/icons/clock-grey.svg" />

          <p
            i18n="“application-time|offer-card@@offer.card.applicationTime”"
            class="left"
          >
            Hvor lang tid tar det å søke:
          </p>

          <p
            i18n="“demand-change|offer-card@@offer.card.timeApply.value”"
            class="box right"
          >
            {{
              offer.bankInfo.applicationTime === null
                ? customLangTextSerice.get18nFixForUnknown()
                : offer.bankInfo.applicationTime + ' min'
            }}
          </p>
        </div>

        <div class="item">
          <img class="icon" src="../../../../assets/icons/swap-grey.svg" />
          <p
            i18n="“demand-change|offer-card@@offer.card.demandChange”"
            class="left"
          >
            Krever bytte av nettbank
          </p>
          <p i18n="“no-yes|offer-card@@offer.card.noYes”" class="box right">
            {{
              offer.requiredProductPackage == null
                ? customLangTextSerice.get18nFixForNo()
                : 'Ja'
            }}
          </p>
        </div>

        <div *ngIf="offer.bankInfo.bankType" class="item">
          <img class="icon" src="../../../../assets/icons/bank-grey.svg" />
          <p i18n="“demand-change|offer-card@@offer.card.bankType" class="left">
            Type bank
          </p>
          <p class="box right">{{ offer.bankInfo.bankType }}</p>
        </div>

        <div *ngIf="!isSweden && offer.bankInfo.area" class="item">
          <img
            class="icon location"
            src="../../../../assets/icons/location-grey-circle.svg"
          />
          <p i18n="“demand-change|offer-card@@offer.card.bankType" class="left">
            Geografi
          </p>
          <p class="box right">{{ offer.bankInfo.area }}</p>
        </div>

        <div
          *ngIf="!isSweden && offer.bankInfo.area === null && offer.marketArea"
          class="item"
        >
          <img
            class="icon location"
            src="../../../../assets/icons/location-grey-circle.svg"
          />
          <p i18n="“demand-change|offer-card@@offer.card.bankType" class="left">
            Geografi
          </p>
          <p class="box right">{{ offer.marketArea }}</p>
        </div>

        <div *ngIf="offer.bankRating" class="item">
          <img class="icon" src="../../../../assets/icons/graph-grey.svg" />
          <p
            i18n="“demand-change|offer-card@@offer.card.historicRate"
            class="left"
          >
            Historisk plassering
          </p>
          <p class="box right">{{ offer.bankRating }}</p>
        </div>

        <div *ngIf="offer.bankInfo.score" class="item">
          <p
            i18n="“customer-satisfied|offer-card@@offer.card.customerSatisfied”"
            class="left"
          >
            Kundetilfredshet:
          </p>
          <rente-bar
            class="bar"
            highestValue="5"
            currentValue="{{ offer.bankInfo.score }}"
          ></rente-bar>
        </div>
        <div class="item">
          <p
            i18n="“customer-satisfied|offer-card@@offer.card.appRating”"
            class="left"
          >
            Mobilbank:
          </p>
          <rente-bar
            *ngIf="offer.bankInfo.mobileAppRating"
            class="bar"
            highestValue="10"
            currentValue="{{ offer.bankInfo.mobileAppRating }}"
          ></rente-bar>
          <p
            *ngIf="
              offer.bankInfo.mobileAppRating === null ||
              offer.bankInfo.mobileAppRating === undefined
            "
            class="box right"
            i18n="
              “application-time|offer-card@@offer.card.mobileRatingNotAvailable"
          >
            Webbsida
          </p>
        </div>

        <div class="item middle details">
          <mat-expansion-panel
            (opened)="detailOpenClicked()"
            [expanded]="xpandStatus"
          >
            <mat-expansion-panel-header
              [collapsedHeight]="'20px'"
              [expandedHeight]="'20px'"
            >
              Mer info
            </mat-expansion-panel-header>

            <rente-offer-card-details
              [offer]="offer"
              (closeClicked)="xpandStatus = xpandStatus ? false : true"
            >
            </rente-offer-card-details>
          </mat-expansion-panel>
        </div>
      </div>

      <div class="buttons">
        <rente-button
          *ngIf="offer.bankInfo.bank !== 'NYBYGGER'"
          class="firstButton"
          [disabled]="offer.bankInfo.partner == false"
          i18n="“see-more|offer-card-big@@offer.card.big.seeMore”"
          [color]="'primary-wide-hollow-card'"
          type="raised"
          (click)="openBankUrlByButton(offer)"
          >Se mer på {{ getbankNameOrDefault(offer, true) }}s hjemmeside
        </rente-button>

        <div>
          <rente-button
            class="button"
            i18n="“get-offer|offer-card@@offer.card.getOffer”"
            [disabled]="offer.bankInfo.partner == false"
            color="primary-medium-card"
            type="raised"
            (click)="openNewOfferDialog(offer)"
            >{{ offerCardService.getOfferButtonText(offer) }}
          </rente-button>
          <p class="small" *ngIf="offer.bankInfo.partner === false">
            (Ingen avtale med banken)
          </p>
        </div>

        <div *ngIf="isNordea">
          <rente-button
            child
            childClass="{{ offer.bankInfo.name }}"
            color="secondary-medium-card"
            type="raised"
            (click)="clickNordea()"
          >
            Be Nordea om et bedre tilbud
          </rente-button>
        </div>
      </div>
    </div>

    <div class="obligatory-info offer-bottom full-row">
      <p
        i18n="“number-details|offer-card@@offer.card.numberDetails”"
        class="insignificant"
      >
        <span> </span> Eff.rente {{ offer.effectiveRate | number: '1.2-2' }} %,
        Lånebeløp {{ offer.outstandingDebt | number: '1.0' }},
        {{ offer.loanPeriodYears | number: '1.1-1' }} år, Kostnad:
        {{ offer.cost | number: '1.0' }}, Totalt:
        {{ offer.totalCost | number: '1.0' }}
      </p>
    </div>
  </div>
</div>
