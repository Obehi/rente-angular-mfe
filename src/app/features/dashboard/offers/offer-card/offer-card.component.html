<div class="the-offer">
    <div class="the-offer-header">
        <div class="logo" [ngStyle]="{
                'background-image': 'url(' + banksMap[offer.bankInfo.bank].img + ')'
              }">
            <div class="nr">
                <p>{{ index + 1 }}</p>
            </div>
        </div>
        <div class="offer-product">
            <a class="clickable" target="_blank" (click)="openBankUrl(offer)">{{ offer.bankInfo.name }}
                <!--<mat-icon>
                    open_in_new</mat-icon>
                -->
                </a>

            <h3 (click)="openOfferDialog(offer)" class="clickable">
                {{ offer.productName }} 
            </h3>
        
        </div>
        <p>{{ offer.effectiveRate | number: "1.2-2" }}%</p>
    </div>
    <div class="the-offer-body">
        <div class="offer-top">

            <!--
            <ul class="info-table">
                <li>
                    <p *ngIf="offer.totalSavings > 0; else noTotalSavings">
                        {{ offer.totalSavings | abs | number }},-
                    </p>
                    <ng-template #noTotalSavings>
                        <p>0,-</p>
                    </ng-template>
                </li>
                <li>
                    <p *ngIf="offer.savingsFirstYear > 0; else noTotalSavings">
                        {{ offer.savingsFirstYear | abs | number }},-
                    </p>
                    <ng-template #noSavingsFirstYear>
                        <p>0,-</p>
                    </ng-template>
                </li>
            </ul>
            -->

            

            <p class="save-text">Du sparer</p>
            <div class="split">
               
                <div class="offer-inner save">
                  <h2 *ngIf="offer.totalSavings > 0; else noTotalSavings">
                    {{ offer.totalSavings | abs | number }},-
                  </h2>
                  <ng-template #noTotalSavings>
                    <h2>0,-</h2>
                  </ng-template>
                  <p>over lånets løpetid</p>
                </div>
                <div class="offer-inner save">
                  <h2 *ngIf="offer.savingsFirstYear > 0; else noTotalSavings">
                    {{ offer.savingsFirstYear | abs | number }},-
                  </h2>
                  <ng-template #noSavingsFirstYear>
                    <h2>0,-</h2>
                  </ng-template>
                  <p>første år</p>
                </div>
              </div>
        </div>

        <div class="offer-properties">
           

            <div class="item left first">
                <p class="left">Hvor lang tid tar det å bytte:</p>
                <p class="box">
                    {{offer.bankInfo.applicationTime  === null ? 'Ukjent' : offer.bankInfo.applicationTime + " min"}}</p>
            </div>

            <div class="item left">
                <p class="left">Krever bytte av nettbank:</p>
                <p class="box">{{ offer.requiredProductPackage == null ? "Nei" : "Ja" }}</p>
            </div>

            <div class="item right first satisfaction">
                <p class="left">Kundetilfredshet:</p>
                <img class="offer-score"
                        src="../../../../assets/icons/score-{{offer.bankInfo.score }}.svg" />
            </div>

            <div class="item left details">
               
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                          Detaljer
                        </mat-expansion-panel-header>
                        
                        <rente-details [offer]="offer"></rente-details>
                      </mat-expansion-panel>
              
            </div>


            <div class="item buttons">
                
                    <div>
                        <rente-button-small [disabled]=" 
                            offersInfo.offerSavingsType === offerSavingsType.NO_SAVINGS ||
                            offer.bankInfo.partner == false"  [color]="isPrimary() ? 'primary': 'secondary'" type="raised"
                            (click)="openBankUrlByButton(offer)">Se mer på {{getbankNameOrDefault(offer)}}s <br/> hjemmeside
                        </rente-button-small>
                    </div>
        
                    <div>
                        <rente-button-small [disabled]="
                        offersInfo.offerSavingsType === offerSavingsType.NO_SAVINGS ||
                          offer.bankInfo.partner == false" [color]="isPrimary() ? 'primary': 'secondary'" type="raised"
                            (click)="openNewOfferDialog(offer)">Få tilbud fra {{getbankNameOrDefault(offer)}}!
                        </rente-button-small>
                        <p class="small" *ngIf=" offer.bankInfo.partner === false"> (Ingen avtale med banken)</p>
                    </div>
            </div>
        </div>

        <div class="obligatory-info offer-bottom full-row">
            
            <p class="insignificant"><span>
                </span> Eff.rente {{offer.effectiveRate | number: "1.2-2"}}%,
                Lånebeløp {{offer.outstandingDebt | number: "1.0" }},
                {{offer.loanPeriodYears | number: "1.1-1" }} år,
                Kostnad: {{offer.cost | number: "1.0" }},
                Totalt: {{offer.totalCost | number: "1.0" }}
            </p>
        </div>

    </div>
</div>