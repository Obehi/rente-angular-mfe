<div class="offers" *ngIf="offersInfo && !noOffers">
  <h3>Rentebarometer</h3>
  <div class="row">
    <div class="col-12 col-md-5">
      <rente-rating [rating]="offersService.getRatingNumberFromLoanState(offersInfo.currentLoanState)"></rente-rating>
      <p class="text-border mb-5">Tips: Boligverdi/belåningsgrad er viktig mtp hva bankene tilbyr. Du kan endre i Bolig
        fanen</p>
      <p class="text-border">Enkelte banker tilbyr bedre betingelser gitt at du har et medlemskap i en
        interesseorganisasjon. Hvis du har
        mulighet til å bli medlem prøv gjerne å endre ditt medlemskap ved å klikke her for å se om det påvirker
        resultatet av din rentesjekk. (Medlemskap pleier å koste ca 4000 i året)</p>
    </div>
    <div class="col-12 col-md-7 text-center">
      <div class="row mb-4">
        <div class="col-12 col-sm-7 mb-3">
          <div class="bg-wrap" [ngSwitch]="offersInfo.currentLoanState">
            <h3 *ngSwitchCase="loanStateMap.NO_LOANS">Vi fant ingen lån, er du sikker på at du har lån i {{offersInfo.bank}} ?</h3>
            <h3 *ngSwitchCase="loanStateMap.NO_OFFERS">Lånet ditt delt på antatt boligverdi er for høyt. Sjekk og endre din boligverdi <a [routerLink]="['/dashboard/bolig']">her</a></h3>
            <h3 *ngSwitchCase="loanStateMap.SAVINGS_FIRST_YEAR_BELOW_0">Du har veldig god rente!</h3>
            <h3 *ngSwitchCase="loanStateMap.SAVINGS_FIRST_YEAR_BETWEEN_3000_AND_0">Renten din er ok, men du kan få bedre</h3>
            <h3 *ngSwitchCase="loanStateMap.SAVINGS_FIRST_YEAR_GREATER_3000">Du kan spare mye på å bytte!</h3>
            <div *ngSwitchDefault>-</div>
          </div>
            <!-- <h3>Du har ikke noe å spare på å bytte bank</h3> -->
        </div>
        <div class="col-12 col-sm-5">
          <div class="bg-wrap">
            <p>Gjenværende lån:</p>
            <h3>{{offersInfo.totalOutstandingDebt / 1000000 | number: '1.1-3'}} millioner</h3>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-sm-7" *ngIf="offersInfo.currentLoanState !== loanStateMap.NO_LOANS && offersInfo.currentLoanState !== loanStateMap.NO_OFFERS">
          <div class="row">
            <div class="col-12 col-sm-6 mb-3">
              <div class="bg-wrap">
                <p>Din rente:</p>
                <h3>{{offersInfo.totalEffectiveRate | number: '1.1-2' }}%</h3>
              </div>
            </div>
            <div class="col-12 col-sm-6 mb-3">
              <div class="bg-wrap">
                <p>Beste tilbud:</p>
                <h3>{{offersInfo.bestOfferEffectiveRate | number: '1.1-2' }}%</h3>
              </div>
            </div>
          </div>

        </div>
        <div class="col-12 col-sm-5">
          <div class="bg-wrap">
            <p>Boligverdi:</p>
            <h3>{{offersInfo.propertyValue / 1000000 | number: '1.1-3'}} millioner</h3>
          </div>
        </div>
      </div>
    </div>
  </div>
  <h3 class="mb-4">Beste tilbud:</h3>
  <ng-container *ngIf="offersInfo">
    <div class="bg-wrap offers-bank mb-5" *ngFor="let offer of offersInfo.offers">
      <div class="row">
        <div class="col-12 col-sm-6 pt-2">
          <div class="row">
            <div class="col-12 col-sm-4 ">
              <img style="max-width: 120px" *ngIf="banksMap[offer.bank].imgCircle" [src]="banksMap[offer.bank].imgCircle" alt="" title="banksMap[offer.bank].label">
            </div>
            <div class="col-12 col-sm-8">
              <div class="mb-4">
                <p class="mb-2">{{banksMap[offer.bank].label}}</p>
                <h3>{{offer.productName}}</h3>
              </div>
              <div class="row">
                <div class="col-12 col-sm-6">
                  <p>Rentebesparelse over lånets løpetid:</p>
                  <h3>{{offer.totalSavings | abs}},—</h3>
                </div>
                <div class="col-12 col-sm-6">
                  <p>Rentebesparelse første år:</p>
                  <h3>{{offer.savingsFirstYear | abs}},—</h3>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 pt-2">
          <div class="row">
            <div class="col-12 col-sm-7">
              <div class="row">
                <div class="col-12 col-sm-12 mb-4">
                  <p class="mb-2">Effektiv rente: </p>
                  <h3>{{offer.effectiveRate | number: '1.1-2' }}%</h3>
                </div>
                <div class="col-12 col-sm-12">
                  <p>Krever annet produkt (e.g. lønnskonto):</p>
                  <h3> Ja</h3>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-5">
              <rente-button class="mb-4" color="primary" type="stroked" (click)="openOfferDialog(offer)">Mer info</rente-button>
              <rente-button class="mt-2" color="primary" type="stroked" [href]="banksMap[offer.bank].url">Bankens hjemmeside</rente-button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>

<div class="my-5 row justify-content-center" *ngIf="noOffers">
    <div class="my-5 row justify-content-center">
        <div class="col-lg-6 col-md-8 col-12">
          <div class="bg-wrap">
            <h3>Størrelsen på lånet ditt er for stor i forhold til vår estimerte boligverdi (>85%).
              Kontroller og endre boligverdien din <a [routerLink]="['/dashboard/bolig']" >her i boligfanen</a></h3>
          </div>

</div>


<div class="d-flex justify-content-center align-items-center mt-4" *ngIf="isLoading && !errorMessage">
  <mat-spinner [diameter]="48" [strokeWidth]="4"></mat-spinner>
</div>

<div *ngIf="!offersInfo && !isLoading && !errorMessage">
  <h1 class="text-center mt-4">No offers yet...</h1>
</div>

<div *ngIf="errorMessage">
  <h1 class="text-center mt-4">{{errorMessage}}</h1>
</div>