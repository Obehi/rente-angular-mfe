<div class="housecontainer">
  <div class="heading">
    <img src="../../../assets/icons/house-icon-white.svg" alt="Bolig" />
    <b>Bolig {{ index + 1 }}</b>
    <mat-icon
      *ngIf="isAbleToDelete"
      (click)="onDeleteAddressClick()"
      class="clickable"
      >delete_forever</mat-icon
    >
    <button
      [disabled]="!isAddressValid"
      (click)="toggleMode()"
      class="clickable"
    >
      <p *ngIf="isEditMode">Se statistikk</p>
      <mat-icon *ngIf="isStatMode">keyboard_backspace</mat-icon>
    </button>
  </div>
  <div class="body">
    <p *ngIf="!isStatMode" class="top-text bold">
      Renteradar trenger å vite din boligverdi for å finne riktige tilbud til
      deg
    </p>
    <div *ngIf="!isStatMode" class="estimat">
      <p class="slide-toggle-text bold">Automatisk estimat:</p>

      <mat-slide-toggle
        class="button"
        (change)="
          address.useManualPropertyValue = !address.useManualPropertyValue
        "
        value="address.useManualPropertyValue"
      ></mat-slide-toggle>
    </div>
    <div *ngIf="!isStatMode" class="address">
      <rente-input
        type="text"
        [placeholder]="'Adresse'"
        [(ngModel)]="address.street"
        (change)="countChange()"
      ></rente-input>
    </div>
    <div *ngIf="isStatMode" [@fade]>
      <rente-virdi-statistics [address]="address"> </rente-virdi-statistics>
    </div>
    <div [class]="isStatMode ? 'hidden' : 'double'">
      <rente-input
        [type]="'tel'"
        [placeholder]="'Postnummer'"
        [(ngModel)]="address.zip"
        [maxLength]="4"
        (change)="countChange()"
      ></rente-input>

      <rente-input
        matInput
        [type]="'tel'"
        [placeholder]="'Størrelse på bolig (kvm)'"
        [(ngModel)]="address.apartmentSize"
        [maxLength]="3"
        (change)="countChange()"
      ></rente-input>
    </div>

    <div *ngIf="!isStatMode" class="double">
      <rente-input
        [type]="'tel'"
        [placeholder]="'Fellesgjeld'"
        (change)="countChange()"
        [ngModel]="address?.commonDebt | thousands"
        (ngModelChange)="address.commonDebt = formatThousand($event)"
      ></rente-input>
    </div>

    <div *ngIf="!isStatMode" class="non-double estimated">
      <p class="house-value bold">Boligverdi</p>
      <div *ngIf="address.useManualPropertyValue" [@test]>
        <!-- <rente-input
          matInput
          class="automatic"
          [type]="'tel'"
          [ngModel]="address?.estimatedPropertyValue | thousands"
          (change)="countChange()"
          (focus)="countChange()"
          style="pointer-events: none; text-align: center !important"
        ></rente-input> -->

        <p class="green-text">
          {{ address?.estimatedPropertyValue | thousands }} kr
        </p>
      </div>
      <div *ngIf="!address.useManualPropertyValue" [@test]>
        <rente-input
          #test
          matInput
          *ngIf="!address.useManualPropertyValue"
          [type]="'tel'"
          [ngModel]="address?.manualPropertyValue | thousands"
          (change)="countChange()"
          (keyup)="manualPropertyValueChanged($event)"
        ></rente-input>
      </div>
    </div>

    <div class="center-button">
      <rente-button
        color="primary"
        [disabled]="!ableTosave"
        (click)="save()"
        class="save-changes-local"
        >Lagre endringer
      </rente-button>
      <p *ngIf="address.estimatedPropertyValue" class="small">
        Estimert av Virdi
      </p>

      <p *ngIf="!address.estimatedPropertyValue" class="small saveForEstimate">
        Lagre endringene for å hente estimat
      </p>
    </div>
  </div>
</div>
